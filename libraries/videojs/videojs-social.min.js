/**
 * @brightcove/videojs-social
 * @version 3.7.2
 * @copyright 2018 Brightcove, Inc.
 * @license UNLICENSED
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsSocial=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(function(){function e(e){this.value=e}function t(t){function n(r,i){try{var s=t[r](i),l=s.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(o,s){var l={key:e,arg:t,resolve:o,reject:s,next:null};i?i=i.next=l:(r=i=l,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,n){return"function"==typeof e.usingPlugin?e.usingPlugin(n):"ads"===n?"object"===t(e.ads):"playlist"===n?!(!e.playlist||"object"!==t(e.playlist.autoadvance_)):!!e[n]}),o=function(e){e.postrollStarted=!1,e.postrollFinished=!1,e.postrollTimedOut=!1,e.sawNoPostrollEvent=!1},r=function(){var e=this;if(!this.endscreenState_){var t=this.endscreenState_={},r=function(){return e.trigger("endscreen")};o(t),this.on("adstart",function(){var n=e.ended();t.postrollStarted=n,t.postrollFinished=!n}),this.on("adend",function(){t.postrollFinished=e.ended()}),this.on("adtimeout",function(){t.postrollTimedOut=e.ended()}),this.on(["endscreen","loadstart"],function(){e.off("adend",r),o(t)}),this.on("nopostroll",function(){t.sawNoPostrollEvent=!0}),this.on("ended",function(){(function(e){if(!n(e,"playlist"))return!1;var t=e.playlist,o=t();return!(0!==t.autoadvance_.delay||!o.length)&&(t.repeat()||t.currentItem()!==o.length-1)})(e)||(!function(e){if(!n(e,"ads"))return!1;var t=e.endscreenState_;return!t.sawNoPostrollEvent&&t.postrollStarted&&!t.postrollFinished&&!t.postrollTimedOut}(e)?r():e.one("adend",r))})}};e.registerPlugin?e.getPlugin("endscreen")||e.registerPlugin("endscreen",r):e.plugin("endscreen",r);!function(){function e(e){this.value=e}function t(t){function n(r,i){try{var s=t[r](i),l=s.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(e,t){return new Promise(function(o,s){var l={key:e,arg:t,resolve:o,reject:s,next:null};i?i=i.next=l:(r=i=l,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var i,s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(e,t){return e.raw=t,e},u=function(e){function t(n,o){s(this,t);var r=a(this,e.call(this,n,o));return r.controlText(r.localize("Share")),r}return l(t,e),t.prototype.handleClick=function(){this.showOverlay()},t.prototype.showOverlay=function(){var e=this.player().socialOverlay;e&&e.open()},t.prototype.buildCSSClass=function(){return"vjs-share-control "+e.prototype.buildCSSClass.call(this)},t}(e.getComponent("Button")),p="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d={},f=Object.freeze({default:d}),h=f&&d||f,v=void 0!==p?p:"undefined"!=typeof window?window:{};"undefined"!=typeof document?i=document:(i=v["__GLOBAL_DOCUMENT_CACHE@4"])||(i=v["__GLOBAL_DOCUMENT_CACHE@4"]=h);var y,m=i,b=y="undefined"!=typeof window?window:void 0!==p?p:"undefined"!=typeof self?self:{},g=function(e){for(var t="",n=0;n<arguments.length;n++)t+=function(e){return e.replace(/\n\r?\s*/g,"")}(e[n])+(arguments[n+1]||"");return t},_=c(["\n      https://www.facebook.com/sharer/sharer.php\n        ?u=","\n        &title=","\n    "],["\n      https://www.facebook.com/sharer/sharer.php\n        ?u=","\n        &title=","\n    "]),w=c(["\n      https://plus.google.com/share\n        ?url=","\n    "],["\n      https://plus.google.com/share\n        ?url=","\n    "]),k=c(["\n      https://www.linkedin.com/shareArticle\n        ?mini=true\n        &url=","\n        &title=","\n        &summary=","\n        &source=Classic\n    "],["\n      https://www.linkedin.com/shareArticle\n        ?mini=true\n        &url=","\n        &title=","\n        &summary=","\n        &source=Classic\n    "]),j=c(["\n      https://pinterest.com/pin/create/button/\n        ?url=","\n        &media=","\n        &description=","\n        &is_video=true\n    "],["\n      https://pinterest.com/pin/create/button/\n        ?url=","\n        &media=","\n        &description=","\n        &is_video=true\n    "]),C=c(["\n      https://www.tumblr.com/share\n        ?v=3\n        &u=","\n        &t=","\n    "],["\n      https://www.tumblr.com/share\n        ?v=3\n        &u=","\n        &t=","\n    "]),S=c(["\n      https://twitter.com/intent/tweet\n        ?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons\n        &text=","\n        &tw_p=tweetbutton\n        &url=","\n    "],["\n      https://twitter.com/intent/tweet\n        ?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons\n        &text=","\n        &tw_p=tweetbutton\n        &url=","\n    "]),x=c(["\n      <iframe src='","' allowfullscreen frameborder=0></iframe>\n    "],["\n      <iframe src='","' allowfullscreen frameborder=0></iframe>\n    "]),E=c(['\n      <h1 class="vjs-social-title">',": ",'</h1>\n      <h2 class="vjs-social-description">','</h2>\n      <div class="vjs-social-share-links">\n        ',"\n      </div>\n      ","\n      ","\n      ","\n    "],['\n      <h1 class="vjs-social-title">',": ",'</h1>\n      <h2 class="vjs-social-description">','</h2>\n      <div class="vjs-social-share-links">\n        ',"\n      </div>\n      ","\n      ","\n      ","\n    "]),O=c(['\n      <label class="vjs-social-embed-code" aria-label="','">\n        <span class="vjs-social-label-text">','</span>\n        <input type="text" tabindex="10" readonly="true" value="">\n      </label>\n    '],['\n      <label class="vjs-social-embed-code" aria-label="','">\n        <span class="vjs-social-label-text">','</span>\n        <input type="text" tabindex="10" readonly="true" value="">\n      </label>\n    ']),I=c(['\n        <label class="vjs-social-direct-link" aria-label="','">\n          <span class="vjs-social-label-text">','</span>\n          <input type="text" tabindex="8" readonly="true" value="">\n        </label>\n      '],['\n        <label class="vjs-social-direct-link" aria-label="','">\n          <span class="vjs-social-label-text">','</span>\n          <input type="text" tabindex="8" readonly="true" value="">\n        </label>\n      ']),P=c(['\n        <label class="vjs-social-start-from" aria-label="','">\n          <span class="vjs-social-label-text">','</span>\n          <input type="text" tabindex="9" title="'," ",'" placeholder=\n          "','" maxlength="10" value="','">\n        </label>\n      '],['\n        <label class="vjs-social-start-from" aria-label="','">\n          <span class="vjs-social-label-text">','</span>\n          <input type="text" tabindex="9" title="'," ",'" placeholder=\n          "','" maxlength="10" value="','">\n        </label>\n      ']),D=c(['\n      <button tabindex="0" class="vjs-restart vjs-icon-replay vjs-button">\n        <span class="vjs-control-text">',"</span>\n      </button>\n    "],['\n      <button tabindex="0" class="vjs-restart vjs-icon-replay vjs-button">\n        <span class="vjs-control-text">',"</span>\n      </button>\n    "]),F=c(["\n      //players.brightcove.net/\n      ","/\n      ","_","/\n      index.html\n      ","\n      ","\n    "],["\n      //players.brightcove.net/\n      ","/\n      ","_","/\n      index.html\n      ","\n      ","\n    "]),z=e.getComponent("ModalDialog"),T=e.dom||e,U=[{key:"facebook",title:"Facebook",href:function(e){return g(_,e.url,e.title)}},{key:"google",classSuffix:"gplus",title:"Google+",href:function(e){return g(w,e.url)}},{key:"linkedin",title:"LinkedIn",href:function(e){return g(k,e.url,e.title,e.description)}},{key:"pinterest",title:"Pinterest",href:function(e){return g(j,e.url,e.poster,e.title)}},{key:"tumblr",title:"Tumblr",href:function(e){return g(C,e.url,e.title)}},{key:"twitter",title:"Twitter",href:function(e){return g(S,e.title,e.url)}}],L=function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join(",")}({width:600,height:400,top:100,left:100,titlebar:"yes",modal:"yes",resizable:"yes",toolbar:"no",status:1,location:"no",menubar:"no",centerscreen:"yes"}),A=/^\s*(0*[1-5]?\d|0*[1-5]?\d:[0-5]\d|\d+:[0-5]\d:[0-5]\d)\s*$/,B=function(t){function n(e,o){s(this,n),o.label=o.label||e.localize("Sharing Dialog");var r=a(this,t.call(this,e,o));return r.isIframe_=b.parent!=b,r.on("modalfill",r.performSafeDomUpdates),r.on("modalopen",function(){if(r.toggleDock("hide"),e.el().contains(m.activeElement)||m.activeElement===e.el()){var t=r.el().querySelector(".vjs-social-share-links a");t?t.focus():r.el().querySelector(".vjs-social-direct-link input").focus()}}),r.on("modalclose",function(){r.toggleDock("show"),r.player().socialButton.el().focus()}),r.on(r.contentEl(),"click",r.delegateClick),r.options_.deeplinking&&(r.on("modalfill",function(){var e=r.offsetEl();e&&r.on(e,"change",r.performSafeDomUpdates)}),r.on(["beforemodalfill","dipose"],function(){var e=r.offsetEl();e&&r.off(e,"change",r.performSafeDomUpdates)})),r}return l(n,t),n.prototype.directLinkEl=function(){return this.contentEl().querySelector(".vjs-social-direct-link input")},n.prototype.embedCodeEl=function(){return this.contentEl().querySelector(".vjs-social-embed-code input")},n.prototype.offsetEl=function(){return this.contentEl().querySelector(".vjs-social-start-from input")},n.prototype.toggleDock=function(e){this.options_.hasDock&&(this.player().getChild("shelf")[e](),this.player().getChild("title")[e]())},n.prototype.delegateClick=function(e){e.preventDefault(),e.target===this.contentEl().querySelector(".vjs-restart")?(this.close(),this.player().currentTime(0),this.player().play()):e.target===this.directLinkEl()||e.target===this.embedCodeEl()?e.target.select():T.hasClass(e.target,"vjs-social-share-link")&&b.open(e.target.href,"_blank",L)},n.prototype.buildCSSClass=function(){return"vjs-social-overlay "+t.prototype.buildCSSClass.call(this)},n.prototype.performSafeDomUpdates=function(){var e=this.offsetEl(),t=this.directLinkEl(),n=this.embedCodeEl();if(e){var o=!!e.value&&!A.test(e.value);T.toggleClass(e,"vjs-invalid",o)}t&&(t.value=this.getDirectLink()),n&&(n.value=this.getEmbedCode())},n.prototype.getEmbedCode=function(){var e=this.player(),t=this.getPlayerMediaInfo_(),n=this.getEmbedUrl_({accountId:e.options_["data-account"],playerId:e.options_["data-player"],embedId:e.options_["data-embed"],videoId:t.id?"?videoId="+t.id:""});return this.options_.embedCode||g(x,n)},n.prototype.setEmbedCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options_.embedCode=e},n.prototype.getDirectLink=function(){return this.getVideoUrl_(!0)},n.prototype.setDirectLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.options_.url=e},n.prototype.asEndscreen=function(e){var t=this;return"boolean"==typeof e&&this.asEndscreen_!==e&&(this.asEndscreen_=e,e?(this.player().height()<=300&&this.addClass("vjs-social-short-player"),this.addClass("vjs-social-as-endscreen"),this.open(),this.one("modalclose",function(){return t.asEndscreen(!1)})):(this.removeClass("vjs-social-short-player"),this.removeClass("vjs-social-as-endscreen"))),this.asEndscreen_},n.prototype.content=function(){var e=m.createElement("form");return e.innerHTML=g(E,this.localize("Share"),this.getTitle_(),this.getDescription_(),this.contentForSocialButtons_(this.options_.services,this.options_.customServices),this.contentForDirectLink_(),this.contentForEmbed_(),this.contentForRestart_()),e},n.prototype.contentForEmbed_=function(){if(!0===this.options_.removeEmbed)return"";var e=this.localize("Embed Code"),t=this.localize("Read Only: Embed Code");return g(O,t,e)},n.prototype.contentForDirectLink_=function(){var e=this.options_.deeplinking,t=!0!==this.options_.removeDirect;if(!e&&!t)return"";var n="";if(t){var o=this.localize("Direct Link"),r=this.localize("Read Only")+": "+this.localize("Direct Link To Content");n+=g(I,r,o)}if(e){var i=this.localize("Start From"),s=this.localize("The offset must be specified using the following pattern:"),l=A.test(this.options_.offset)?this.options_.offset:"";n+=g(P,i,i,s,"hh:mm:ss","hh:mm:ss",l)}return n},n.prototype.contentForRestart_=function(){if(!this.asEndscreen())return"";var e=this.localize("Restart");return g(D,e)},n.prototype.contentForSocialButtons_=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=this.player(),r={description:encodeURIComponent(this.options_.description),poster:encodeURIComponent(o.poster()||""),title:encodeURIComponent(this.getTitle_()),url:encodeURIComponent(this.getVideoUrl_())};return n=n.filter(function(t){return!(t.mobileOnly&&!e.browser.IS_IOS&&!e.browser.IS_ANDROID)}).map(function(e){return e.hrefTemplate&&"function"!=typeof e.href&&(e.href=function(t){var n=e.hrefTemplate;for(var o in t){var r=new RegExp("{{"+o+"}}","g");n=n.replace(r,t[o])}return n}),e}),U.filter(function(e){return t[e.key]}).concat(n).map(function(e,t){return'\n        <a href="'+e.href(r)+'"\n            class="vjs-social-share-link '+(e.className?e.className:"vjs-icon-"+(e.classSuffix||e.key))+'"\n            aria-role="link"\n            aria-label="'+o.localize("Share on {{network}}").replace("{{network}}",o.localize(e.title))+'"\n            tabindex="'+(t+1)+'"\n            title="'+o.localize(e.title)+'"\n            '+(e.bgColor?'style="background-color:'+e.bgColor+'"':"")+'\n            target="_blank">\n          <span class="vjs-control-text">'+o.localize(e.title)+"</span>\n        </a>\n      "}).join("")},n.prototype.getConvertedOffsetHash_=function(){if(this.options_.deeplinking){var e=this.offsetEl(),t=this.convertOffset_(e&&e.value||this.options_.offset);if(t)return"#t="+t}return""},n.prototype.addPlaylistVideoId_=function(e){var t=this.player(),n="function"==typeof t.playlist&&t.playlist();if(Array.isArray(n)&&n.length){var o=t.playlist.currentItem(),r=o>-1&&n[o];if(r&&r.id){var i=(b.location.search?"&":"?")+"playlistVideoId="+r.id,s=/([?&])playlistVideoId=[^&]+/,l=e.match(s);l?e=e.replace(s,l[1]+"playlistVideoId="+r.id):e+=i}}return e},n.prototype.getVideoUrl_=function(e){var t=void 0;return t=this.options_.url?this.options_.url:this.isIframe_?m.referrer:this.addPlaylistVideoId_(b.location.href),e&&(t+=this.getConvertedOffsetHash_()),t},n.prototype.getEmbedUrl_=function(e){return this.isIframe_?b.location.href:g(F,e.accountId,e.playerId,e.embedId,e.videoId,this.getConvertedOffsetHash_())},n.prototype.getPlayerMediaInfo_=function(){var e=this.player();return e.mediainfo||e.options_["data-media"]||{}},n.prototype.getTitle_=function(){return this.options_.title||this.getPlayerMediaInfo_().name||""},n.prototype.getDescription_=function(){return this.options_.description||this.getPlayerMediaInfo_().description||""},n.prototype.convertOffset_=function(e){var t=0,n=[1,60,3600],o="";if("string"==typeof e){var r=e.split(":");if(r.length>=1&&r.length<=3){for(var i=0;i<r.length;++i){var s=parseInt(r[i],10)*n[r.length-1-i];if(isNaN(s))return"";t+=s}t>=n[2]&&0!==Math.floor(t/n[2])&&(o=Math.floor(t/n[2])+"h",t%=n[2]),t>=n[1]&&0!==Math.floor(t/n[1])&&(o+=Math.floor(t/n[1])+"m",t%=n[1]),t>0&&(o+=t+"s")}}return o},n}(z);B.prototype.options_=e.mergeOptions(z.prototype.options_,{fillAlways:!0,temporary:!1});var M={title:"",description:"",url:"",label:"",embedCode:"",deeplinking:!1,displayAfterVideo:!1,offset:"00:00:00",buttonParent:"controlBar",hasDock:!1,removeDirect:!1,removeEmbed:!1,services:{facebook:!0,google:!0,twitter:!0,tumblr:!0,pinterest:!0,linkedin:!0},customServices:[]},R=e.getComponent("Component"),V=e.registerPlugin||e.plugin,N=e.dom||e,q=function(e){return e instanceof R},H=function(t){var n=this,o=e.mergeOptions(M,t);o.removeDirect&&(o.deeplinking=!1),o.displayAfterVideo&&this.endscreen(),this.ready(function(){o.hasDock=q(n.title)&&q(n.shelf),n.socialButton=function(e,t){(function(e){return"[object Object]"===Object.prototype.toString.call(e)})(e.socialSettings)&&e.socialButton.dispose();var n=function e(t,n){var o=n.buttonParent,r="string"==typeof o?t.getChild(o):o;return q(r)||o===M.buttonParent||(n.buttonParent=M.buttonParent,r=e(t,n)),q(r)?r:null}(e,t),o=n.addChild("socialButton",t);if(n.one(o,"dispose",function(){return n.removeChild(o)}),t.buttonParent===M.buttonParent){var r=n.el().querySelector(".vjs-spacer");n.el().insertBefore(o.el(),r.nextSibling)}else n===e.shelf&&(o.removeClass("vjs-control"),N.removeClass(o.$(".vjs-control-text"),"vjs-control-text"));return o}(n,o),n.socialOverlay=function(t,n){var o=t.socialOverlay,r=void 0;return o&&(r=o.opened(),o.close(),o.options_.temporary||o.dispose()),o=t.addChild("socialOverlay",n),function(t){var n=function(){e.log.warn('Using "show" to open the social plugin overlay is deprecated. Use open() instead!'),this.open()},o=function(){e.log.warn('Using "hide" to close the social plugin overlay is deprecated. Use close() instead!'),this.close()};t.show=n,t.hide=o,t.on("beforemodalopen",function(){delete t.show}),t.on("modalopen",function(){t.show=n}),t.on("beforemodalclose",function(){delete t.hide}),t.on("modalclose",function(){t.hide=o})}(o),N.addClass(o.$(".vjs-close-button",o),"vjs-icon-cancel"),t.one(o,"dispose",function(){return t.removeChild(o)}),n.displayAfterVideo&&t.on("endscreen",function(){return o.asEndscreen(!0)}),r&&o.open(),o}(n,o),n.socialSettings=o,n.on("loadstart",function(){n.socialOverlay.close()});var t=function(){return function(e){e.socialOverlay.toggleClass("vjs-social-small",function(){return e.currentWidth()<400})}(n)};n.on("resize",t),n.socialOverlay.on("dispose",function(){n.off("resize",t)}),t.call(n)})};return e.registerComponent("SocialButton",u),e.registerComponent("SocialOverlay",B),V("social",H),H});